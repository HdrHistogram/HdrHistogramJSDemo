!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("pako")):"function"==typeof define&&define.amd?define("hdr",["pako"],e):"object"==typeof exports?exports.hdr=e(require("pako")):t.hdr=e(t.pako)}(this,function(t){return function(t){function e(n){if(o[n])return o[n].exports;var r=o[n]={exports:{},id:n,loaded:!1};return t[n].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var o={};return e.m=t,e.c=o,e.p="",e(0)}([function(t,e,o){t.exports=o(22)},function(t,e,o){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=o(2),i=o(19),a=o(18),u=o(7),s=o(23),c=Math.pow,h=Math.floor,l=Math.ceil,d=Math.log2,p=Math.max,f=Math.min,v=function(t){function e(e,o,n){var i=t.call(this)||this;if(i.maxValue=0,i.minNonZeroValue=Number.MAX_SAFE_INTEGER,e<1)throw new Error("lowestDiscernibleValue must be >= 1");if(o<2*e)throw new Error("highestTrackableValue must be >= 2 * lowestDiscernibleValue");if(n<0||n>5)throw new Error("numberOfSignificantValueDigits must be between 0 and 5");return i.identity=r.AbstractHistogramBase.identityBuilder++,i.init(e,o,n,1,0),i}return n(e,t),e.prototype.updatedMaxValue=function(t){var e=t+this.unitMagnitudeMask;this.maxValue=e},e.prototype.updateMinNonZeroValue=function(t){if(!(t<=this.unitMagnitudeMask)){var e=h(t/this.lowestDiscernibleValueRounded)*this.lowestDiscernibleValueRounded;this.minNonZeroValue=e}},e.prototype.resetMinNonZeroValue=function(t){var e=h(t/this.lowestDiscernibleValueRounded)*this.lowestDiscernibleValueRounded;this.minNonZeroValue=t===Number.MAX_SAFE_INTEGER?t:e},e.prototype.init=function(t,e,o,n,r){this.lowestDiscernibleValue=t,this.highestTrackableValue=e,this.numberOfSignificantValueDigits=o,this.integerToDoubleValueConversionRatio=n,0!==r&&this.setNormalizingIndexOffset(r);var u=2*h(c(10,o));this.unitMagnitude=h(d(t)),this.lowestDiscernibleValueRounded=c(2,this.unitMagnitude),this.unitMagnitudeMask=this.lowestDiscernibleValueRounded-1;var s=l(d(u));this.subBucketHalfCountMagnitude=(s>1?s:1)-1,this.subBucketCount=c(2,this.subBucketHalfCountMagnitude+1),this.subBucketHalfCount=this.subBucketCount/2,this.subBucketMask=(h(this.subBucketCount)-1)*c(2,this.unitMagnitude),this.establishSize(e),this.leadingZeroCountBase=53-this.unitMagnitude-this.subBucketHalfCountMagnitude-1,this.percentileIterator=new a.default(this,1),this.recordedValuesIterator=new i.default(this)},e.prototype.establishSize=function(t){this.countsArrayLength=this.determineArrayLengthNeeded(t),this.bucketCount=this.getBucketsNeededToCoverValue(t),this.highestTrackableValue=t},e.prototype.determineArrayLengthNeeded=function(t){if(t<2*this.lowestDiscernibleValue)throw new Error("highestTrackableValue ("+t+") cannot be < (2 * lowestDiscernibleValue)");var e=this.getLengthForNumberOfBuckets(this.getBucketsNeededToCoverValue(t));return e},e.prototype.getLengthForNumberOfBuckets=function(t){var e=(t+1)*(this.subBucketCount/2);return e},e.prototype.getBucketsNeededToCoverValue=function(t){for(var e=this.subBucketCount*c(2,this.unitMagnitude),o=1;e<=t;){if(e>Number.MAX_SAFE_INTEGER/2)return o+1;e*=2,o++}return o},e.prototype.recordValue=function(t){this.recordSingleValue(t)},e.prototype.recordSingleValue=function(t){var e=this.countsArrayIndex(t);e>=this.countsArrayLength?this.handleRecordException(1,t):this.incrementCountAtIndex(e),this.updateMinAndMax(t),this.incrementTotalCount()},e.prototype.handleRecordException=function(t,e){if(!this.autoResize)throw new Error("Value "+e+" is outside of histogram covered range");this.resize(e);var o=this.countsArrayIndex(e);this.addToCountAtIndex(o,t),this.highestTrackableValue=this.highestEquivalentValue(this.valueFromIndex(this.countsArrayLength-1))},e.prototype.countsArrayIndex=function(t){if(t<0)throw new Error("Histogram recorded value cannot be negative.");var e=this.getBucketIndex(t),o=this.getSubBucketIndex(t,e);return this.computeCountsArrayIndex(e,o)},e.prototype.computeCountsArrayIndex=function(t,e){var o=(t+1)*c(2,this.subBucketHalfCountMagnitude),n=e-this.subBucketHalfCount;return o+n},e.prototype.getBucketIndex=function(t){return p(h(d(t))-this.subBucketHalfCountMagnitude-this.unitMagnitude,0)},e.prototype.getSubBucketIndex=function(t,e){return h(t/c(2,e+this.unitMagnitude))},e.prototype.updateMinAndMax=function(t){t>this.maxValue&&this.updatedMaxValue(t),t<this.minNonZeroValue&&0!==t&&this.updateMinNonZeroValue(t)},e.prototype.getValueAtPercentile=function(t){for(var e=f(t,100),o=e/100*this.getTotalCount(),n=p(l(o-s.default(o)),1),r=0,i=0;i<this.countsArrayLength;i++)if(r+=this.getCountAtIndex(i),r>=n){var a=this.valueFromIndex(i);return 0===t?this.lowestEquivalentValue(a):this.highestEquivalentValue(a)}return 0},e.prototype.valueFromIndexes=function(t,e){return e*c(2,t+this.unitMagnitude)},e.prototype.valueFromIndex=function(t){var e=h(t/this.subBucketHalfCount)-1,o=t%this.subBucketHalfCount+this.subBucketHalfCount;return e<0&&(o-=this.subBucketHalfCount,e=0),this.valueFromIndexes(e,o)},e.prototype.lowestEquivalentValue=function(t){var e=this.getBucketIndex(t),o=this.getSubBucketIndex(t,e),n=this.valueFromIndexes(e,o);return n},e.prototype.highestEquivalentValue=function(t){return this.nextNonEquivalentValue(t)-1},e.prototype.nextNonEquivalentValue=function(t){return this.lowestEquivalentValue(t)+this.sizeOfEquivalentValueRange(t)},e.prototype.sizeOfEquivalentValueRange=function(t){var e=this.getBucketIndex(t),o=this.getSubBucketIndex(t,e),n=c(2,this.unitMagnitude+(o>=this.subBucketCount?e+1:e));return n},e.prototype.medianEquivalentValue=function(t){return this.lowestEquivalentValue(t)+h(this.sizeOfEquivalentValueRange(t)/2)},e.prototype.getMean=function(){if(0===this.getTotalCount())return 0;this.recordedValuesIterator.reset();for(var t=0;this.recordedValuesIterator.hasNext();){var e=this.recordedValuesIterator.next();t+=this.medianEquivalentValue(e.valueIteratedTo)*e.countAtValueIteratedTo}return 1*t/this.getTotalCount()},e.prototype.getStdDeviation=function(){if(0===this.getTotalCount())return 0;var t=this.getMean(),e=0;for(this.recordedValuesIterator.reset();this.recordedValuesIterator.hasNext();){var o=this.recordedValuesIterator.next(),n=this.medianEquivalentValue(o.valueIteratedTo)-t;e+=n*n*o.countAddedInThisIterationStep}var r=Math.sqrt(e/this.getTotalCount());return r},e.prototype.outputPercentileDistribution=function(t,e,o){void 0===t&&(t=5),void 0===e&&(e=1),void 0===o&&(o=!1);var n="";n+=o?'"Value","Percentile","TotalCount","1/(1-Percentile)"\n':"       Value     Percentile TotalCount 1/(1-Percentile)\n\n";var r=this.percentileIterator;r.reset(t);var i,a;if(o){var s=u.floatFormatter(0,this.numberOfSignificantValueDigits),c=u.floatFormatter(0,12),h=u.floatFormatter(0,2);i=function(t){return s(t.valueIteratedTo/e)+","+c(t.percentileLevelIteratedTo/100)+","+t.totalCountToThisValue+","+h(1/(1-t.percentileLevelIteratedTo/100))+"\n"},a=function(t){return s(t.valueIteratedTo/e)+","+c(t.percentileLevelIteratedTo/100)+","+t.totalCountToThisValue+",Infinity\n"}}else{var l=u.floatFormatter(12,this.numberOfSignificantValueDigits),d=u.floatFormatter(2,12),p=u.integerFormatter(10),f=u.floatFormatter(14,2);i=function(t){return l(t.valueIteratedTo/e)+" "+d(t.percentileLevelIteratedTo/100)+" "+p(t.totalCountToThisValue)+" "+f(1/(1-t.percentileLevelIteratedTo/100))+"\n"},a=function(t){return l(t.valueIteratedTo/e)+" "+d(t.percentileLevelIteratedTo/100)+" "+p(t.totalCountToThisValue)+"\n"}}for(;r.hasNext();){var v=r.next();n+=v.percentileLevelIteratedTo<100?i(v):a(v)}if(!o){var g=u.floatFormatter(12,this.numberOfSignificantValueDigits),m=g(this.getMean()/e),y=g(this.getStdDeviation()/e),I=g(this.maxValue/e),T=u.integerFormatter(12),C=T(this.getTotalCount()),b=T(this.bucketCount),A=T(this.subBucketCount);n+="#[Mean    = "+m+", StdDeviation   = "+y+"]\n#[Max     = "+I+", Total count    = "+C+"]\n#[Buckets = "+b+", SubBuckets     = "+A+"]\n"}return n},e.prototype.getEstimatedFootprintInBytes=function(){return this._getEstimatedFootprintInBytes()},e.prototype.recordSingleValueWithExpectedInterval=function(t,e){if(this.recordSingleValue(t),!(e<=0))for(var o=t-e;o>=e;o-=e)this.recordSingleValue(o)},e.prototype.recordCountAtValue=function(t,e){var o=this.countsArrayIndex(e);o>=this.countsArrayLength?this.handleRecordException(t,e):this.addToCountAtIndex(o,t),this.updateMinAndMax(e),this.addToTotalCount(t)},e.prototype.recordValueWithCount=function(t,e){this.recordCountAtValue(e,t)},e.prototype.recordValueWithExpectedInterval=function(t,e){this.recordSingleValueWithExpectedInterval(t,e)},e.prototype.recordValueWithCountAndExpectedInterval=function(t,e,o){if(this.recordCountAtValue(e,t),!(o<=0))for(var n=t-o;n>=o;n-=o)this.recordCountAtValue(e,n)},e.prototype.addWhileCorrectingForCoordinatedOmission=function(t,e){for(var o=this,n=new i.default(t);n.hasNext();){var r=n.next();o.recordValueWithCountAndExpectedInterval(r.valueIteratedTo,r.countAtValueIteratedTo,e)}},e.prototype.add=function(t){var e=this.highestEquivalentValue(this.valueFromIndex(this.countsArrayLength-1));if(e<t.maxValue){if(!this.autoResize)throw new Error("The other histogram includes values that do not fit in this histogram's range.");this.resize(t.maxValue)}if(this.bucketCount===t.bucketCount&&this.subBucketCount===t.subBucketCount&&this.unitMagnitude===t.unitMagnitude){for(var o=0,n=0;n<t.countsArrayLength;n++){var r=t.getCountAtIndex(n);r>0&&(this.addToCountAtIndex(n,r),o+=r)}this.setTotalCount(this.getTotalCount()+o),this.updatedMaxValue(p(this.maxValue,t.maxValue)),this.updateMinNonZeroValue(f(this.minNonZeroValue,t.minNonZeroValue))}else{var i=t.countsArrayIndex(t.maxValue),r=t.getCountAtIndex(i);this.recordCountAtValue(r,t.maxValue);for(var n=0;n<i;n++)r=t.getCountAtIndex(n),r>0&&this.recordCountAtValue(r,t.valueFromIndex(n))}this.startTimeStampMsec=f(this.startTimeStampMsec,t.startTimeStampMsec),this.endTimeStampMsec=p(this.endTimeStampMsec,t.endTimeStampMsec)},e.prototype.getCountAtValue=function(t){var e=f(p(0,this.countsArrayIndex(t)),this.countsArrayLength-1);return this.getCountAtIndex(e)},e.prototype.subtract=function(t){var e=this.valueFromIndex(this.countsArrayLength-1);if(e<t.maxValue){if(!this.autoResize)throw new Error("The other histogram includes values that do not fit in this histogram's range.");this.resize(t.maxValue)}if(this.bucketCount===t.bucketCount&&this.subBucketCount===t.subBucketCount&&this.unitMagnitude===t.unitMagnitude)for(var o=0;o<t.countsArrayLength;o++){var n=t.getCountAtIndex(o);n>0&&this.addToCountAtIndex(o,-n)}else for(var o=0;o<t.countsArrayLength;o++){var n=t.getCountAtIndex(o);if(n>0){var r=t.valueFromIndex(o);if(this.getCountAtValue(r)<n)throw new Error("otherHistogram count ("+n+") at value "+r+" is larger than this one's ("+this.getCountAtValue(r)+")");this.recordCountAtValue(-n,r)}}(this.getCountAtValue(this.maxValue)<=0||this.getCountAtValue(this.minNonZeroValue)<=0)&&this.establishInternalTackingValues()},e.prototype.establishInternalTackingValues=function(t){void 0===t&&(t=this.countsArrayLength),this.maxValue=0,this.minNonZeroValue=Number.MAX_VALUE;for(var e=-1,o=-1,n=0,r=0;r<t;r++){var i=this.getCountAtIndex(r);i>0&&(n+=i,e=r,o==-1&&0!=r&&(o=r))}e>=0&&this.updatedMaxValue(this.highestEquivalentValue(this.valueFromIndex(e))),o>=0&&this.updateMinNonZeroValue(this.valueFromIndex(o)),this.setTotalCount(n)},e.prototype.reset=function(){this.clearCounts(),this.setTotalCount(0),this.startTimeStampMsec=0,this.endTimeStampMsec=0,this.tag=r.NO_TAG,this.maxValue=0,this.minNonZeroValue=Number.MAX_SAFE_INTEGER},e}(r.AbstractHistogramBase);e.AbstractHistogram=v,e.default=v},function(t,e,o){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=o(11);e.NO_TAG="NO TAG";var i=function(t){function o(){var o=t.call(this)||this;return o.autoResize=!1,o.startTimeStampMsec=Number.MAX_SAFE_INTEGER,o.endTimeStampMsec=0,o.tag=e.NO_TAG,o.integerToDoubleValueConversionRatio=1,o.identity=0,o.highestTrackableValue=0,o.lowestDiscernibleValue=0,o.numberOfSignificantValueDigits=0,o.bucketCount=0,o.subBucketCount=0,o.countsArrayLength=0,o.wordSizeInBytes=0,o}return n(o,t),o}(r.EncodableHistogram);e.AbstractHistogramBase=i},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=Math.pow,n=Math.floor,r=o(2,32),i=function(){function t(t){this.position=0,this.data=t,this.int32ArrayForConvert=new Uint32Array(1),this.int8ArrayForConvert=new Uint8Array(this.int32ArrayForConvert.buffer)}return t.allocate=function(e){return void 0===e&&(e=16),new t(new Uint8Array(e))},t.prototype.put=function(t){if(this.position===this.data.length){var e=this.data;this.data=new Uint8Array(2*this.data.length),this.data.set(e)}this.data[this.position]=t,this.position++},t.prototype.putInt32=function(t){if(this.data.length-this.position<4){var e=this.data;this.data=new Uint8Array(2*this.data.length+4),this.data.set(e)}this.int32ArrayForConvert[0]=t,this.data.set(this.int8ArrayForConvert.reverse(),this.position),this.position+=4},t.prototype.putInt64=function(t){this.putInt32(n(t/r)),this.putInt32(t)},t.prototype.putArray=function(t){if(this.data.length-this.position<t.byteLength){var e=this.data;this.data=new Uint8Array(this.position+t.byteLength),this.data.set(e)}this.data.set(t,this.position),this.position+=t.byteLength},t.prototype.get=function(){var t=this.data[this.position];return this.position++,t},t.prototype.getInt32=function(){this.int8ArrayForConvert.set(this.data.slice(this.position,this.position+4).reverse());var t=this.int32ArrayForConvert[0];return this.position+=4,t},t.prototype.getInt64=function(){var t=this.getInt32(),e=this.getInt32();return t*r+e},t.prototype.resetPosition=function(){this.position=0},t}();e.default=i},function(t,e,o){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=o(1),i=function(t){function e(e,o,n){var r=t.call(this,e,o,n)||this;return r.totalCount=0,r.counts=new Uint32Array(r.countsArrayLength),r}return n(e,t),e.prototype.clearCounts=function(){this.counts.fill(0)},e.prototype.incrementCountAtIndex=function(t){var e=this.counts[t],o=e+1;if(o<0)throw o+" would overflow short integer count";this.counts[t]=o},e.prototype.addToCountAtIndex=function(t,e){var o=this.counts[t],n=o+e;if(n<Number.MIN_SAFE_INTEGER||n>Number.MAX_SAFE_INTEGER)throw n+" would overflow integer count";this.counts[t]=n},e.prototype.setCountAtIndex=function(t,e){if(e<Number.MIN_SAFE_INTEGER||e>Number.MAX_SAFE_INTEGER)throw e+" would overflow integer count";this.counts[t]=e},e.prototype.resize=function(t){this.establishSize(t);var e=new Uint32Array(this.countsArrayLength);e.set(this.counts),this.counts=e},e.prototype.setNormalizingIndexOffset=function(t){},e.prototype.incrementTotalCount=function(){this.totalCount++},e.prototype.addToTotalCount=function(t){this.totalCount+=t},e.prototype.setTotalCount=function(t){this.totalCount=t},e.prototype.getTotalCount=function(){return this.totalCount},e.prototype.getCountAtIndex=function(t){return this.counts[t]},e.prototype._getEstimatedFootprintInBytes=function(){return 512+4*this.counts.length},e.prototype.copyCorrectedForCoordinatedOmission=function(t){var o=new e(this.lowestDiscernibleValue,this.highestTrackableValue,this.numberOfSignificantValueDigits);return o.addWhileCorrectingForCoordinatedOmission(this,t),o},e}(r.default);e.default=i},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o(3),r=o(1),i=o(4);o(10);var a=o(9),u=function(t,e,o){void 0===e&&(e=i.default),void 0===o&&(o=0);var u=new n.default(a.toByteArray(t));return r.AbstractHistogram.decodeFromCompressedByteBuffer(u,e,o)};e.decodeFromCompressedBase64=u;var s=function(t,e){var o=n.default.allocate(),r=t.encodeIntoCompressedByteBuffer(o,e),i=o.data.slice(0,r);return a.fromByteArray(i)};e.encodeIntoBase64String=s},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o(13),r=function(){function t(){this.currentIterationValue=new n.default}return t.prototype.resetIterator=function(t){this.histogram=t,this.savedHistogramTotalRawCount=t.getTotalCount(),this.arrayTotalCount=t.getTotalCount(),this.currentIndex=0,this.currentValueAtIndex=0,this.nextValueAtIndex=Math.pow(2,t.unitMagnitude),this.prevValueIteratedTo=0,this.totalCountToPrevIndex=0,this.totalCountToCurrentIndex=0,this.totalValueToCurrentIndex=0,this.countAtThisValue=0,this.freshSubBucket=!0,this.currentIterationValue.reset()},t.prototype.hasNext=function(){if(this.histogram.getTotalCount()!==this.savedHistogramTotalRawCount)throw"Concurrent Modification Exception";return this.totalCountToCurrentIndex<this.arrayTotalCount},t.prototype.next=function(){for(;!this.exhaustedSubBuckets();){if(this.countAtThisValue=this.histogram.getCountAtIndex(this.currentIndex),this.freshSubBucket&&(this.totalCountToCurrentIndex+=this.countAtThisValue,this.totalValueToCurrentIndex+=this.countAtThisValue*this.histogram.highestEquivalentValue(this.currentValueAtIndex),this.freshSubBucket=!1),this.reachedIterationLevel()){var t=this.getValueIteratedTo();if(Object.assign(this.currentIterationValue,{valueIteratedTo:t,valueIteratedFrom:this.prevValueIteratedTo,countAtValueIteratedTo:this.countAtThisValue,countAddedInThisIterationStep:this.totalCountToCurrentIndex-this.totalCountToPrevIndex,totalCountToThisValue:this.totalCountToCurrentIndex,totalValueToThisValue:this.totalValueToCurrentIndex,percentile:100*this.totalCountToCurrentIndex/this.arrayTotalCount,percentileLevelIteratedTo:this.getPercentileIteratedTo()}),this.prevValueIteratedTo=t,this.totalCountToPrevIndex=this.totalCountToCurrentIndex,this.incrementIterationLevel(),this.histogram.getTotalCount()!==this.savedHistogramTotalRawCount)throw new Error("Concurrent Modification Exception");return this.currentIterationValue}this.incrementSubBucket()}throw new Error("Index Out Of Bounds Exception")},t.prototype.getPercentileIteratedTo=function(){return 100*this.totalCountToCurrentIndex/this.arrayTotalCount},t.prototype.getPercentileIteratedFrom=function(){return 100*this.totalCountToPrevIndex/this.arrayTotalCount},t.prototype.getValueIteratedTo=function(){return this.histogram.highestEquivalentValue(this.currentValueAtIndex)},t.prototype.exhaustedSubBuckets=function(){return this.currentIndex>=this.histogram.countsArrayLength},t.prototype.incrementSubBucket=function(){this.freshSubBucket=!0,this.currentIndex++,this.currentValueAtIndex=this.histogram.valueFromIndex(this.currentIndex),this.nextValueAtIndex=this.histogram.valueFromIndex(this.currentIndex+1)},t}();e.default=r},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){return function(e){return e.length<t?" ".repeat(t-e.length)+e:e}};e.integerFormatter=function(t){var e=o(t);return function(t){return e(""+t)}},e.floatFormatter=function(t,e){var n=new Intl.NumberFormat("en-US",{maximumFractionDigits:e,minimumFractionDigits:e,useGrouping:!1}),r=o(t);return function(t){return r(n.format(t))}}},function(e,o){e.exports=t},function(t,e){"use strict";function o(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===t[e-2]?2:"="===t[e-1]?1:0}function n(t){return 3*t.length/4-o(t)}function r(t){var e,n,r,i,a,u=t.length;i=o(t),a=new h(3*u/4-i),n=i>0?u-4:u;var s=0;for(e=0;e<n;e+=4)r=c[t.charCodeAt(e)]<<18|c[t.charCodeAt(e+1)]<<12|c[t.charCodeAt(e+2)]<<6|c[t.charCodeAt(e+3)],a[s++]=r>>16&255,a[s++]=r>>8&255,a[s++]=255&r;return 2===i?(r=c[t.charCodeAt(e)]<<2|c[t.charCodeAt(e+1)]>>4,a[s++]=255&r):1===i&&(r=c[t.charCodeAt(e)]<<10|c[t.charCodeAt(e+1)]<<4|c[t.charCodeAt(e+2)]>>2,a[s++]=r>>8&255,a[s++]=255&r),a}function i(t){return s[t>>18&63]+s[t>>12&63]+s[t>>6&63]+s[63&t]}function a(t,e,o){for(var n,r=[],a=e;a<o;a+=3)n=(t[a]<<16&16711680)+(t[a+1]<<8&65280)+(255&t[a+2]),r.push(i(n));return r.join("")}function u(t){for(var e,o=t.length,n=o%3,r="",i=[],u=16383,c=0,h=o-n;c<h;c+=u)i.push(a(t,c,c+u>h?h:c+u));return 1===n?(e=t[o-1],r+=s[e>>2],r+=s[e<<4&63],r+="=="):2===n&&(e=(t[o-2]<<8)+t[o-1],r+=s[e>>10],r+=s[e>>4&63],r+=s[e<<2&63],r+="="),i.push(r),i.join("")}e.byteLength=n,e.toByteArray=r,e.fromByteArray=u;for(var s=[],c=[],h="undefined"!=typeof Uint8Array?Uint8Array:Array,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",d=0,p=l.length;d<p;++d)s[d]=l[d],c[l.charCodeAt(d)]=d;c["-".charCodeAt(0)]=62,c["_".charCodeAt(0)]=63},function(t,e,o){"use strict";function n(t,e){for(var o=t.countsArrayIndex(t.maxValue)+1,n=0;n<o;){var r=t.getCountAtIndex(n++);if(r<0)throw new Error("Cannot encode histogram containing negative counts ("+r+") at index "+n+", corresponding the value range ["+t.lowestEquivalentValue(t.valueFromIndex(n))+","+t.nextNonEquivalentValue(t.valueFromIndex(n))+")");var i=0;if(0==r)for(i=1;n<o&&0==t.getCountAtIndex(n);)i++,n++;i>1?p.default.encode(e,-i):p.default.encode(e,r)}}function r(t){var e=this,o=t.position;t.putInt32(y),t.putInt32(0),t.putInt32(1),t.putInt32(e.numberOfSignificantValueDigits),t.putInt64(e.lowestDiscernibleValue),t.putInt64(e.highestTrackableValue),t.putInt64(1);var r=t.position;n(e,t);var i=t.position;return t.position=o+4,t.putInt32(i-r),t.position=i,i-o}function i(t,e,o,n){if(2!=n&&4!=n&&8!=n&&n!=m)throw new Error("word size must be 2, 4, 8, or V2maxWordSizeInBytes ("+m+") bytes");for(var r=0,i=e.position+o;e.position<i;){var a=0,u=p.default.decode(e);u<0?(a=-u,r+=a):t.setCountAtIndex(r++,u)}return r}function a(t){return t&-241}function u(t){if(a(t)==v||a(t)==g)return m;var e=(240&t)>>4;return 14&e}function s(t,e,o){var n,r,s,c,h=t.getInt32();if(a(h)!==v)throw new Error("The buffer does not contain a Histogram (no valid V2 encoding cookie found)");if(u(h)!=m)throw new Error("The buffer does not contain a Histogram (no valid cookie found)");n=t.getInt32(),t.getInt32(),r=t.getInt32(),s=t.getInt64(),c=t.getInt64(),t.getInt64(),c=f(c,o);var l=new e(s,c,r),d=i(l,t,n,m);return l.establishInternalTackingValues(d),l}function c(t,e,n){var r=t.position,i=t.getInt32();if((i&-241)!==g)throw new Error("Encoding not supported, only V2 is supported");var a=t.getInt32(),u=o(8),c=u.inflate(t.data.slice(r+8,r+8+a));return s(new l.default(c),e,n)}function h(t,e){var n=this,r=l.default.allocate(),i=n.encodeIntoByteBuffer(r);t.putInt32(I);var a=o(8),u=e?{level:e}:{},s=a.deflate(r.data.slice(0,i),u);return t.putInt32(s.byteLength),t.putArray(s),t.position}Object.defineProperty(e,"__esModule",{value:!0});var l=o(3),d=o(1),p=o(21),f=Math.max,v=478450435,g=478450436,m=9,y=16|v,I=16|g;e.encodeIntoByteBuffer=r,e.doDecodeFromByteBuffer=s,e.doDecodeFromCompressedByteBuffer=c,e.encodeIntoCompressedByteBuffer=h,d.AbstractHistogram.decodeFromByteBuffer=s,d.AbstractHistogram.decodeFromCompressedByteBuffer=c,d.AbstractHistogram.prototype.encodeIntoByteBuffer=r,d.AbstractHistogram.prototype.encodeIntoCompressedByteBuffer=h},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(){}return t}();e.EncodableHistogram=o},function(t,e,o){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=o(1),i=function(t){function e(e,o,n){var r=t.call(this,e,o,n)||this;return r.totalCount=0,r.counts=new Float64Array(r.countsArrayLength),r}return n(e,t),e.prototype.clearCounts=function(){this.counts.fill(0)},e.prototype.incrementCountAtIndex=function(t){var e=this.counts[t],o=e+1;if(o<0)throw o+" would overflow short integer count";this.counts[t]=o},e.prototype.addToCountAtIndex=function(t,e){var o=this.counts[t],n=o+e;if(n<Number.MIN_SAFE_INTEGER||n>Number.MAX_SAFE_INTEGER)throw n+" would overflow integer count";this.counts[t]=n},e.prototype.setCountAtIndex=function(t,e){if(e<Number.MIN_SAFE_INTEGER||e>Number.MAX_SAFE_INTEGER)throw e+" would overflow integer count";this.counts[t]=e},e.prototype.resize=function(t){this.establishSize(t);var e=new Float64Array(this.countsArrayLength);e.set(this.counts),this.counts=e},e.prototype.setNormalizingIndexOffset=function(t){},e.prototype.incrementTotalCount=function(){this.totalCount++},e.prototype.addToTotalCount=function(t){this.totalCount+=t},e.prototype.setTotalCount=function(t){this.totalCount=t},e.prototype.getTotalCount=function(){return this.totalCount},e.prototype.getCountAtIndex=function(t){return this.counts[t]},e.prototype._getEstimatedFootprintInBytes=function(){return 512+8*this.counts.length},e.prototype.copyCorrectedForCoordinatedOmission=function(t){var o=new e(this.lowestDiscernibleValue,this.highestTrackableValue,this.numberOfSignificantValueDigits);return o.addWhileCorrectingForCoordinatedOmission(this,t),o},e}(r.default);e.default=i},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(){this.reset()}return t.prototype.reset=function(){this.valueIteratedTo=0,this.valueIteratedFrom=0,this.countAtValueIteratedTo=0,this.countAddedInThisIterationStep=0,this.totalCountToThisValue=0,this.totalValueToThisValue=0,this.percentile=0,this.percentileLevelIteratedTo=0},t}();e.default=o},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o(2),r=o(5),i="Tag=",a="Tag=".length,u=function(){function t(t){this.lines=s(t),this.currentLineIndex=0}return t.prototype.nextIntervalHistogram=function(t,e){for(void 0===t&&(t=0),void 0===e&&(e=Number.MAX_VALUE);this.currentLineIndex<this.lines.length;){var o=this.lines[this.currentLineIndex];if(this.currentLineIndex++,o.startsWith("#[StartTime:"))this.parseStartTimeFromLine(o);else if(o.startsWith("#[BaseTime:"))this.parseBaseTimeFromLine(o);else if(o.startsWith("#")||o.startsWith('"StartTimestamp"'));else if(o.includes(",")){var u=o.split(","),s=u[0],c=void 0;s.startsWith(i)?(c=s.substring(a),u.shift()):c=n.NO_TAG;var h=u[0],l=u[1],d=u[3],p=Number.parseFloat(h);if(this.baseTimeSec||(p<this.startTimeSec-31536e3?this.baseTimeSec=this.startTimeSec:this.baseTimeSec=0),e<p)return null;if(p<t)continue;var f=r.decodeFromCompressedBase64(d);f.startTimeStampMsec=1e3*(this.baseTimeSec+p);var v=Number.parseFloat(l);return f.endTimeStampMsec=1e3*(this.baseTimeSec+p+v),f.tag=c,f}}return null},t.prototype.parseStartTimeFromLine=function(t){this.startTimeSec=Number.parseFloat(t.split(" ")[1])},t.prototype.parseBaseTimeFromLine=function(t){this.baseTimeSec=Number.parseFloat(t.split(" ")[1])},t}(),s=function(t){return t.split(/\r\n|\r|\n/g)},c=function(t){return t.find(function(t){return!t.startsWith("#")&&!t.startsWith('"')&&!t.startsWith(i)&&t.includes(",")})};e.listTags=function(t){var e=s(t),o=e.filter(function(t){return t.includes(",")&&t.startsWith(i)}).map(function(t){return t.substring(a,t.indexOf(","))}),n=new Set(o),r=Array.from(n);return c(e)&&r.unshift("NO TAG"),r},e.default=u},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o(2),r=o(5),i=o(7),a="1.3",u=i.floatFormatter(5,3),s=function(){function t(t){this.log=t,this.baseTime=0}return t.prototype.outputIntervalHistogram=function(t,e,o,i){void 0===e&&(e=(t.startTimeStampMsec-this.baseTime)/1e3),void 0===o&&(o=(t.endTimeStampMsec-this.baseTime)/1e3),void 0===i&&(i=1e3);var a=r.encodeIntoBase64String(t),s=u(e),c=u(o-e),h=u(t.maxValue/i),l=s+","+c+","+h+","+a+"\n";t.tag&&t.tag!==n.NO_TAG?this.log("Tag="+t.tag+","+l):this.log(l)},t.prototype.outputComment=function(t){this.log("#"+t+"\n")},t.prototype.outputStartTime=function(t){this.outputComment("[StartTime: "+i.floatFormatter(5,3)(t/1e3)+" (seconds since epoch), "+new Date(t)+"]\n")},t.prototype.outputLegend=function(){this.log('"StartTimestamp","Interval_Length","Interval_Max","Interval_Compressed_Histogram"\n')},t.prototype.outputLogFormatVersion=function(){this.outputComment("[Histogram log format version "+a+"]")},t}();e.default=s},function(t,e,o){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=o(1),i=function(t){function e(e,o,n){var r=t.call(this,e,o,n)||this;return r.totalCount=0,r.counts=new Uint16Array(r.countsArrayLength),r}return n(e,t),e.prototype.clearCounts=function(){this.counts.fill(0)},e.prototype.incrementCountAtIndex=function(t){var e=this.counts[t],o=e+1;if(o<0)throw o+" would overflow short integer count";this.counts[t]=o},e.prototype.addToCountAtIndex=function(t,e){var o=this.counts[t],n=o+e;if(n<Number.MIN_SAFE_INTEGER||n>Number.MAX_SAFE_INTEGER)throw n+" would overflow integer count";this.counts[t]=n},e.prototype.setCountAtIndex=function(t,e){if(e<Number.MIN_SAFE_INTEGER||e>Number.MAX_SAFE_INTEGER)throw e+" would overflow integer count";this.counts[t]=e},e.prototype.resize=function(t){this.establishSize(t);var e=new Uint16Array(this.countsArrayLength);e.set(this.counts),this.counts=e},e.prototype.setNormalizingIndexOffset=function(t){},e.prototype.incrementTotalCount=function(){this.totalCount++},e.prototype.addToTotalCount=function(t){this.totalCount+=t},e.prototype.setTotalCount=function(t){this.totalCount=t},e.prototype.getTotalCount=function(){return this.totalCount},e.prototype.getCountAtIndex=function(t){return this.counts[t]},e.prototype._getEstimatedFootprintInBytes=function(){return 512+2*this.counts.length},e.prototype.copyCorrectedForCoordinatedOmission=function(t){var o=new e(this.lowestDiscernibleValue,this.highestTrackableValue,this.numberOfSignificantValueDigits);return o.addWhileCorrectingForCoordinatedOmission(this,t),o},e}(r.default);e.default=i},function(t,e,o){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=o(1),i=function(t){function e(e,o,n){var r=t.call(this,e,o,n)||this;return r.totalCount=0,r.counts=new Uint8Array(r.countsArrayLength),r}return n(e,t),e.prototype.clearCounts=function(){this.counts.fill(0)},e.prototype.incrementCountAtIndex=function(t){var e=this.counts[t],o=e+1;if(o<0)throw o+" would overflow short integer count";this.counts[t]=o},e.prototype.addToCountAtIndex=function(t,e){var o=this.counts[t],n=o+e;if(n<Number.MIN_SAFE_INTEGER||n>Number.MAX_SAFE_INTEGER)throw n+" would overflow integer count";this.counts[t]=n},e.prototype.setCountAtIndex=function(t,e){if(e<Number.MIN_SAFE_INTEGER||e>Number.MAX_SAFE_INTEGER)throw e+" would overflow integer count";this.counts[t]=e},e.prototype.resize=function(t){this.establishSize(t);
var e=new Uint8Array(this.countsArrayLength);e.set(this.counts),this.counts=e},e.prototype.setNormalizingIndexOffset=function(t){},e.prototype.incrementTotalCount=function(){this.totalCount++},e.prototype.addToTotalCount=function(t){this.totalCount+=t},e.prototype.setTotalCount=function(t){this.totalCount=t},e.prototype.getTotalCount=function(){return this.totalCount},e.prototype.getCountAtIndex=function(t){return this.counts[t]},e.prototype._getEstimatedFootprintInBytes=function(){return 512+this.counts.length},e.prototype.copyCorrectedForCoordinatedOmission=function(t){var o=new e(this.lowestDiscernibleValue,this.highestTrackableValue,this.numberOfSignificantValueDigits);return o.addWhileCorrectingForCoordinatedOmission(this,t),o},e}(r.default);e.default=i},function(t,e,o){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=o(6),i=Math.pow,a=Math.floor,u=Math.log2,s=function(t){function e(e,o){var n=t.call(this)||this;return n.percentileTicksPerHalfDistance=0,n.percentileLevelToIterateTo=0,n.percentileLevelToIterateFrom=0,n.reachedLastRecordedValue=!1,n.doReset(e,o),n}return n(e,t),e.prototype.reset=function(t){this.doReset(this.histogram,t)},e.prototype.doReset=function(e,o){t.prototype.resetIterator.call(this,e),this.percentileTicksPerHalfDistance=o,this.percentileLevelToIterateTo=0,this.percentileLevelToIterateFrom=0,this.reachedLastRecordedValue=!1},e.prototype.hasNext=function(){return!!t.prototype.hasNext.call(this)||!this.reachedLastRecordedValue&&this.arrayTotalCount>0&&(this.percentileLevelToIterateTo=100,this.reachedLastRecordedValue=!0,!0)},e.prototype.incrementIterationLevel=function(){this.percentileLevelToIterateFrom=this.percentileLevelToIterateTo;var t=this.percentileTicksPerHalfDistance*i(2,a(u(100/(100-this.percentileLevelToIterateTo)))+1);this.percentileLevelToIterateTo+=100/t},e.prototype.reachedIterationLevel=function(){if(0===this.countAtThisValue)return!1;var t=100*this.totalCountToCurrentIndex/this.arrayTotalCount;return t>=this.percentileLevelToIterateTo},e.prototype.getPercentileIteratedTo=function(){return this.percentileLevelToIterateTo},e.prototype.getPercentileIteratedFrom=function(){return this.percentileLevelToIterateFrom},e}(r.default);e.default=s},function(t,e,o){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=o(6),i=function(t){function e(e){var o=t.call(this)||this;return o.doReset(e),o}return n(e,t),e.prototype.reset=function(){this.doReset(this.histogram)},e.prototype.doReset=function(e){t.prototype.resetIterator.call(this,e),this.visitedIndex=-1},e.prototype.incrementIterationLevel=function(){this.visitedIndex=this.currentIndex},e.prototype.reachedIterationLevel=function(){var t=this.histogram.getCountAtIndex(this.currentIndex);return 0!=t&&this.visitedIndex!==this.currentIndex},e}(r.default);e.default=i},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o(4),r=function(){function t(e,o){void 0===e&&(e=3),void 0===o&&(o=function(){return(new Date).getTime()}),this.numberOfSignificantValueDigits=e,this.clock=o,this.activeHistogram=new n.default(1,Number.MAX_SAFE_INTEGER,e),t.idGenerator++,this.activeHistogram.containingInstanceId=t.idGenerator,this.activeHistogram.startTimeStampMsec=o()}return t.prototype.recordValue=function(t){this.activeHistogram.recordValue(t)},t.prototype.recordValueWithCount=function(t,e){this.activeHistogram.recordValueWithCount(t,e)},t.prototype.recordValueWithExpectedInterval=function(t,e){this.activeHistogram.recordValueWithExpectedInterval(t,e)},t.prototype.getIntervalHistogram=function(t){if(t){var e=t;if(e.containingInstanceId!==this.activeHistogram.containingInstanceId)throw"replacement histogram must have been obtained via a previous getIntervalHistogram() call from this Recorder"}this.inactiveHistogram=t,this.performIntervalSample();var o=this.inactiveHistogram;return this.inactiveHistogram=null,o},t.prototype.getIntervalHistogramInto=function(t){this.performIntervalSample(),this.inactiveHistogram&&(t.add(this.inactiveHistogram),t.startTimeStampMsec=this.inactiveHistogram.startTimeStampMsec,t.endTimeStampMsec=this.inactiveHistogram.endTimeStampMsec)},t.prototype.reset=function(){this.activeHistogram.reset(),this.activeHistogram.startTimeStampMsec=this.clock()},t.prototype.performIntervalSample=function(){this.inactiveHistogram||(this.inactiveHistogram=new n.default(1,Number.MAX_SAFE_INTEGER,this.numberOfSignificantValueDigits),this.inactiveHistogram.containingInstanceId=this.activeHistogram.containingInstanceId),this.inactiveHistogram.reset();var t=this.activeHistogram;this.activeHistogram=this.inactiveHistogram,this.inactiveHistogram=t;var e=this.clock();this.inactiveHistogram.endTimeStampMsec=e,this.activeHistogram.startTimeStampMsec=e},t.idGenerator=0,t}();e.default=r},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=Math.pow,n=Math.floor,r=o(2,7),i=o(2,14),a=o(2,21),u=o(2,28),s=o(2,35),c=o(2,42),h=o(2,49),l=o(2,56),d=function(){function t(){}return t.encode=function(t,e){e>=0?e*=2:e=2*-e-1,e<r?t.put(e):(t.put(128|e),e<i?t.put(n(e/r)):(t.put(128|n(e/r)),e<a?t.put(n(e/i)):(t.put(128|n(e/i)),e<u?t.put(n(e/a)):(t.put(128|n(e/a)),e<s?t.put(n(e/u)):(t.put(128|n(e/u)),e<c?t.put(n(e/s)):(t.put(128|n(e/s)),e<h?t.put(n(e/c)):(t.put(128|n(e/c)),e<l?t.put(n(e/h)):(t.put(n(e/h)+128),t.put(n(e/l))))))))))},t.decode=function(t){var e=t.get(),o=127&e;return 0!=(128&e)&&(e=t.get(),o+=(127&e)*r,0!=(128&e)&&(e=t.get(),o+=(127&e)*i,0!=(128&e)&&(e=t.get(),o+=(127&e)*a,0!=(128&e)&&(e=t.get(),o+=(127&e)*u,0!=(128&e)&&(e=t.get(),o+=(127&e)*s,0!=(128&e)&&(e=t.get(),o+=(127&e)*c,0!=(128&e)&&(e=t.get(),o+=(127&e)*h,0!=(128&e)&&(e=t.get(),o+=(127&e)*l)))))))),o%2===0?o/=2:o=-(o+1)/2,o},t}();e.default=d},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o(3);e.ByteBuffer=n.default;var r=o(17);e.Int8Histogram=r.default;var i=o(16);e.Int16Histogram=i.default;var a=o(4);e.Int32Histogram=a.default;var u=o(12);e.Float64Histogram=u.default;var s=o(1);e.AbstractHistogram=s.default,e.Histogram=s.default;var c=o(14);e.HistogramLogReader=c.default,e.listTags=c.listTags;var h=o(15);e.HistogramLogWriter=h.default;var l=o(5);e.decodeFromCompressedBase64=l.decodeFromCompressedBase64,e.encodeIntoBase64String=l.encodeIntoBase64String;var d=o(20);e.Recorder=d.default;var p={bitBucketSize:32,autoResize:!0,lowestDiscernibleValue:1,highestTrackableValue:2,numberOfSignificantValueDigits:3};e.defaultRequest=p;var f=function(t){void 0===t&&(t=p);var e,o=Object.assign({},p,t);switch(o.bitBucketSize){case 8:e=r.default;break;case 16:e=i.default;break;case 32:e=a.default;break;default:e=u.default}var n=new e(o.lowestDiscernibleValue,o.highestTrackableValue,o.numberOfSignificantValueDigits);return n.autoResize=o.autoResize,n};e.build=f},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){return Math.pow(2,Math.floor(Math.log2(t))-52)};e.default=o}])});
//# sourceMappingURL=hdrhistogram.min.js.map